<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yibo.parking.dao.car.TrackMapper">

    <select id="findList" resultType="Track">
        select
            a.id as "id",
            a.track_id as "trackId",
            a.car_id as "carId",
            a.start_time as "startTime",
            a.end_time as "endTime",
            a.miles as "miles"
        from track a
        where 1 = 1
        <if test="trackId != null and trackId != ''">
            and a.track_id = #{trackId}
        </if>
        <if test="carId != null and carId != ''">
            and a.car_id = #{carId}
        </if>
        <if test="start != null and start != '' and end != null and end != ''">
            and a.start_time between #{start} and #{end}
            and a.end_time between #{start} and #{end}
        </if>
    </select>

    <select id="get" resultType="Track">
        select
            a.id as "id",
            a.track_id as "trackId",
            a.car_id as "carId",
            a.start_time as "startTime",
            a.end_time as "endTime",
            a.miles as "miles"
        from track a
        where 1=1
        <if test="trackId != null and trackId != ''">
            and a.track_id = #{trackId}
        </if>
        <if test="carId != null and carId != ''">
            and a.car_id = #{carId}
        </if>
    </select>

    <insert id="insert">
        insert into track(
            id,
            track_id,
            car_id,
            start_time,
            end_time,
            miles
        )
        values (
            #{id},
            #{trackId},
            #{carId},
            #{startTime},
            #{endTime},
            #{miles}
        )
    </insert>

    <update id="update">
        update track set
            track_id = #{trackId},
            car_id = #{carId},
            start_time = #{startTime},
            end_time = #{endTime},
            miles = #{miles}
        where id = #{id}
    </update>

    <delete id="delete">
        delete from track where id = #{id}
    </delete>
</mapper>